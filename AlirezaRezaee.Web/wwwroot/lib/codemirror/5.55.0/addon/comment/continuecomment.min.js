!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(g){var o=/\S/g,C=String.prototype.repeat||function(e){return Array(e+1).join(this)};function l(n){if(n.getOption("disableInput"))return g.Pass;for(var e,t=n.listSelections(),o=[],i=0;i<t.length;i++){var l=t[i].head;if(!/\bcomment\b/.test(n.getTokenTypeAt(l)))return g.Pass;var r=n.getModeAt(l);if(e){if(e!=r)return g.Pass}else e=r;var c,m,a,u,f,s,d,p=null,h=e.blockCommentStart,b=e.lineComment;if(h&&e.blockCommentContinue&&(-1!=(m=(c=n.getLine(l.line)).lastIndexOf(e.blockCommentEnd,l.ch-e.blockCommentEnd.length))&&m==l.ch-e.blockCommentEnd.length||b&&-1<(f=c.lastIndexOf(b,l.ch-1))&&/\bcomment\b/.test(n.getTokenTypeAt({line:l.line,ch:f+1}))||(l.ch>=h.length&&-1<(f=c.lastIndexOf(h,l.ch-h.length))&&m<f?p=y(0,c)>=f?c.slice(0,f):(a=n.options.tabSize,f=g.countColumn(c,f,a),n.options.indentWithTabs?C.call("\t",u=Math.floor(f/a))+C.call(" ",f-a*u):C.call(" ",f)):-1<(f=c.indexOf(e.blockCommentContinue))&&f<=l.ch&&f<=y(0,c)&&(p=c.slice(0,f))),null!=p&&(p+=e.blockCommentContinue)),null==p&&b&&k(n)&&(null==c&&(c=n.getLine(l.line)),f=c.indexOf(b),l.ch||f?-1<f&&y(0,c)>=f&&((p=-1<y(l.ch,c))||(p=-1<(d=(s=n.getLine(l.line+1)||"").indexOf(b))&&y(0,s)>=d||null),p=p&&c.slice(0,f)+b+c.slice(f+b.length).match(/^\s*/)[0]):p=""),null==p)return g.Pass;o[i]="\n"+p}n.operation(function(){for(var e=t.length-1;0<=e;e--)n.replaceRange(o[e],t[e].from(),t[e].to(),"+insert")})}function y(e,n){o.lastIndex=e;var t=o.exec(n);return t?t.index:-1}function k(e){var n=e.getOption("continueComments");return!n||"object"!=typeof n||!1!==n.continueLineComment}g.defineOption("continueComments",null,function(e,n,t){var o,i;t&&t!=g.Init&&e.removeKeyMap("continueComment"),n&&(o="Enter","string"==typeof n?o=n:"object"==typeof n&&n.key&&(o=n.key),(i={name:"continueComment"})[o]=l,e.addKeyMap(i))})});