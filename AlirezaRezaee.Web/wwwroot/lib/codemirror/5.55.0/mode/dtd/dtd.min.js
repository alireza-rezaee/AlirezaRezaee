!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("dtd",function(t){var o,r=t.indentUnit;function c(t,e){return o=e,t}function l(t,e){var i,n,r,a=t.next();if("<"==a&&t.eat("!"))return t.eatWhile(/[\-]/)?(e.tokenize=s)(t,e):t.eatWhile(/[\w]/)?(o="doindent","keyword"):void 0;if("<"==a&&t.eat("?"))return e.tokenize=(n="meta",r="?>",function(t,e){for(;!t.eol();){if(t.match(r)){e.tokenize=l;break}t.next()}return n}),c("meta",a);if("#"==a&&t.eatWhile(/[\w]/))return o="tag","atom";if("|"==a)return o="seperator","keyword";if(a.match(/[\(\)\[\]\-\.,\+\?>]/))return c(null,a);if(a.match(/[\[\]]/))return c("rule",a);if('"'==a||"'"==a)return e.tokenize=(i=a,function(t,e){for(var n,r=!1;null!=(n=t.next());){if(n==i&&!r){e.tokenize=l;break}r=!r&&"\\"==n}return o="tag","string"}),e.tokenize(t,e);if(t.eatWhile(/[a-zA-Z\?\+\d]/)){var u=t.current();return null!==u.substr(u.length-1,u.length).match(/\?|\+/)&&t.backUp(1),o="tag"}return"%"==a||"*"==a?o="number":(t.eatWhile(/[\w\\\-_%.{,]/),o=null)}function s(t,e){for(var n,r=0;null!=(n=t.next());){if(2<=r&&">"==n){e.tokenize=l;break}r="-"==n?r+1:0}return o="comment"}return{startState:function(t){return{tokenize:l,baseIndent:t||0,stack:[]}},token:function(t,e){if(t.eatSpace())return null;var n=e.tokenize(t,e),r=e.stack[e.stack.length-1];return"["==t.current()||"doindent"===o||"["==o?e.stack.push("rule"):"endtag"===o?e.stack[e.stack.length-1]="endtag":"]"==t.current()||"]"==o||">"==o&&"rule"==r?e.stack.pop():"["==o&&e.stack.push("["),n},indent:function(t,e){var n=t.stack.length;return e.match(/\]\s+|\]/)?--n:">"===e.substr(e.length-1,e.length)&&("<"===e.substr(0,1)||"doindent"==o&&1<e.length||("doindent"==o?n--:">"==o&&1<e.length||"tag"==o&&">"!==e||("tag"==o&&"rule"==t.stack[t.stack.length-1]?n--:"tag"==o?n++:">"===e&&"rule"==t.stack[t.stack.length-1]&&">"===o?n--:">"===e&&"rule"==t.stack[t.stack.length-1]||("<"===e.substr(0,1)||">"!==e.substr(0,1))&&">"===e||--n)),null!=o&&"]"!=o||n--),t.baseIndent+n*r},electricChars:"]>"}}),t.defineMIME("application/xml-dtd","dtd")});