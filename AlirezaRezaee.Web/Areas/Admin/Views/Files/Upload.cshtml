@{
    ViewData["Title"] = "بارگذاری فایل";
}

<div class="container mt-4">
    <h1 class="text-size-6">@ViewData["Title"]</h1>
    <hr />

    <form asp-action="Uploading" asp-controller="Files" asp-area="Admin" enctype="multipart/form-data">
        <div id="form-files">
            <div class="form-file mb-3">
                <input type="file" name="files" class="form-file-input">
                <label class="form-file-label">
                    <span class="form-file-button">فایل</span>
                    <span class="form-file-text">انتخاب کنید ...</span>
                </label>
            </div>
            <div class="form-file mb-3">
                <input type="file" name="files" class="form-file-input">
                <label class="form-file-label">
                    <span class="form-file-button">فایل</span>
                    <span class="form-file-text">انتخاب کنید ...</span>
                </label>
            </div>
            <div class="form-file mb-3">
                <input type="file" name="files" class="form-file-input">
                <label class="form-file-label">
                    <span class="form-file-button">فایل</span>
                    <span class="form-file-text">انتخاب کنید ...</span>
                </label>
            </div>
            <div class="form-file mb-3">
                <input type="file" name="files" class="form-file-input">
                <label class="form-file-label">
                    <span class="form-file-button">فایل</span>
                    <span class="form-file-text">انتخاب کنید ...</span>
                </label>
            </div>
            <div class="form-file mb-3">
                <input type="file" name="files" class="form-file-input">
                <label class="form-file-label">
                    <span class="form-file-button">فایل</span>
                    <span class="form-file-text">انتخاب کنید ...</span>
                </label>
            </div>
        </div>

        <div class="btn btn-light border js-more-files">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-plus-circle text-success" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
            </svg>
            فایل‌های بیشتر
        </div>

        <hr />
        <div class="text-left">
            <button type="submit" class="btn btn-success">
                بارگذاری
            </button>
            @if (User.IsInRole(Roles.FilesList))
            {
                <a asp-action="Upload" asp-controller="Files" asp-area="Admin" class="btn btn-light border">
                    فهرست فایل‌ها
                </a>
            }
        </div>
    </form>
</div>

@section Scripts {
    <script>
        "use strict";

        (document.querySelector('.js-more-files').addEventListener('click', function () {
            let newFormFile = document.createElement('div'),
                newFormFileInput = document.createElement('input'),
                newFormFileLabel = document.createElement('label'),
                newFormFileButton = document.createElement('span'),
                newFormFileText = document.createElement('span');

            newFormFile.classList.add('form-file', 'mb-3');
            newFormFileInput.setAttribute('type', 'file');
            newFormFileInput.setAttribute('name', 'files');
            newFormFileInput.classList.add('form-file-input');
            newFormFileLabel.classList.add('form-file-label');
            newFormFileButton.classList.add('form-file-button');
            newFormFileText.classList.add('form-file-text');

            newFormFileButton.appendChild(document.createTextNode('فایل'));
            newFormFileText.appendChild(document.createTextNode('انتخاب کنید ...'));

            newFormFileLabel.appendChild(newFormFileButton);
            newFormFileLabel.appendChild(newFormFileText);
            newFormFile.appendChild(newFormFileInput);
            newFormFile.appendChild(newFormFileLabel);

            document.querySelector('#form-files').appendChild(newFormFile);
        }))();
    </script>
}