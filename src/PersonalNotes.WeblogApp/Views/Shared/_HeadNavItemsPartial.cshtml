@using Microsoft.AspNetCore.Identity
@using AlirezaRezaee.PersonalNotes.WeblogApp.Helpers
@inject SignInManager<AlirezaRezaee.PersonalNotes.WeblogApp.Areas.Identity.Data.ApplicationUser> SignInManager
@inject UserManager<AlirezaRezaee.PersonalNotes.WeblogApp.Areas.Identity.Data.ApplicationUser> UserManager
@{
    var user = await UserManager.GetUserAsync(User);
}
@addTagHelper *, AlirezaRezaee.PersonalNotes.WeblogApp

<li class="d-block">
    <a asp-route="SiteIndex" class="p-2" style="line-height: 0;">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
            <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
        </svg>
    </a>
</li>
<li class="d-block">
    <a asp-action="Index" asp-controller="Bookmarks" class="p-2" style="line-height: 0;">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bookmark" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M8 12l5 3V3a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12l5-3zm-4 1.234l4-2.4 4 2.4V3a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v10.234z" />
        </svg>
    </a>
</li>
@if (User.IsInRole(Roles.MessagesList))
{
    //Messages Management
    <li class="d-block">
        <a asp-action="Index" asp-controller="Messages" class="p-2" style="line-height: 0;">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chat-square-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2.5a2 2 0 0 1 1.6.8L8 14.333 9.9 11.8a2 2 0 0 1 1.6-.8H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                <path fill-rule="evenodd" d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z" />
            </svg>
        </a>
    </li>
}
else
{
    //Send Message
    <li class="d-block">
        <a asp-action="ContactUs" asp-controller="Messages" class="p-2" style="line-height: 0;">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chat-square-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2.5a2 2 0 0 1 1.6.8L8 14.333 9.9 11.8a2 2 0 0 1 1.6-.8H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                <path fill-rule="evenodd" d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z" />
            </svg>
        </a>
    </li>
}
@if (User.IsInRole(Roles.PostCreateArticle) || User.IsInRole(Roles.PostCreateShare) || User.IsInRole(Roles.PostCreateMarkdown) ||
 User.IsInRole(Roles.BlockCreate) || User.IsInRole(Roles.LinkCreate) || User.IsInRole(Roles.PageCreate) || User.IsInRole(Roles.TagCreate) || User.IsInRole(Roles.UserCreate))
{
    //Write new
    <li class="d-block">
        <a asp-action="Management" asp-controller="Home" class="p-2" style="line-height: 0;">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-columns-gap" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M6 1H1v3h5V1zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12h-5v3h5v-3zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8H1v7h5V8zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6h-5v7h5V1zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z" />
            </svg>
        </a>
    </li>
}
@if (SignInManager.IsSignedIn(User))
{
    //Avatar
    var avatar = (await UserManager.GetUserAsync(User)).ProfileImagePath;
    <li class="d-none d-sm-block ">
        <a asp-area="Identity" asp-page="/account/manage/index" class="p-1" style="line-height:0;">


            @if (string.IsNullOrEmpty(avatar))
            {
                <img-gravatar gravatar-size="35" gravatar-email="@await UserManager.GetEmailAsync(user)" alt="" class="rounded-circle img-fluid"></img-gravatar>
            }
            else
            {
                <img alt="" class="rounded-circle img-fluid" src="@avatar" style="height: 35px !important; width: 35px !important;">
            }
        </a>
    </li>
}
else
{
    <li class="d-none d-sm-block ">
        <a asp-area="Identity" asp-page="/account/login" class="p-2" style="line-height:0;">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lock" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M11.5 8h-7a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-7-1a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7zm0-3a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z" />
            </svg>
        </a>
    </li>
}